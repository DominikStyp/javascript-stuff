
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pl" lang="pl">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Bookmarklet Creator</title>
  <style type="text/css">
  .sort th { background : red; cursor : pointer;}
  #main { margin:0 auto; width: 1000px }
  </style>
</head>
<body>
<div id="main">
Give name for your link: <br />
<input type="text" id="linkName" size="50" value="YourBookmarklet"><br />
Paste your JavaScript code here: <br>
<textarea id="code" rows="25" cols="80">
/** 
 * here is some example JavaScript Code
 * that will be converted into bookmarklet code 
 */
function alertSomeText(){
	var object = { 
		someText: "This is some text",
		someArr: ['try','strings'],
		number: 3.22,
		callBack: function (str){
			if(1 >= 2){
				//doing nothing
				/*some comment*/
			}
			alert("From callback: " + str)
			if("222".length){
				//nothing
			} else {
				//nothing more
			}
		}
	}
	object.callBack("some string")
	object.callBack("another string")
}
alertSomeText();
</textarea><br />
<div id="options">
	Convert to one line? YES:<input type="checkbox" id="inlinize" checked="checked"/><br />
	Url encode JS code? YES:<input type="checkbox" id="urlEncode" checked="checked"/><br />
	<br />
	WARNING! In some cases convert to one line could fail, so the better way is to first minify code using some online minifiers.<br />
	If you have complicated and long code first use minifier like: <a href="http://jscompress.com/" target="_blank">JS Compress</a>, and paste your code into text area,<br />
	and then click <b>Create Bookmarklet!</b><br /><br />
	You can test your bookmarklet right away just by clicking it's link<br />
	
</div>
<input type="button" id="createButton" value="Create Bookmarklet!">
<br />
<div id="resultDiv">&nbsp;</div>

<script type="text/javascript" src="./bookmarklet-creator.js"></script>
<script type="text/javascript">
onload = function(){
	var SETTINGS = {
			Setup: {

			},
			Templates: {
				/** this function returns bookmarklet code **/
				getBookmarkletCallback: function (code,linkName) {
				 	return '<a href="javascript:(function(){'+code+'})();void(null);">'+linkName+'</a>';
				},
				/** this function returns code that is put into "resultDiv" **/
				getResultDivCallback: function(codeLink){
					/** codeLink is generated by getBookmarkletCallback **/
					return '<br />Bookmarklet link: <b>'+codeLink+'</b>'+
						   '<br />Bookmarklet Code : <br>' + 
						   '<textarea rows="15" cols="80">'+codeLink+'</textarea><br />';
				},
				/** this function is invoked if user gives empty code **/
				emptyCodeCallback: function(){
					alert('Please give link name and your JavaScript code'); 
				}
			},
			HTMLelements: {
				resultDiv: "resultDiv",
				linkName: "linkName",
				code: "code",
				createButton: "createButton",
				inlinize: "inlinize",
				urlEncode: "urlEncode"
			}
	};
	// invoke constructor
	BookmarkletCreator(SETTINGS);
};

</script>
</div>
</body>
</html>
